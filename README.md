# yuzu-ilo
yuzuru_sofiaによるyuzuru_sofiaのためのツール。  
自作しているdiscordのbot用の機能だったり自言語関連の機能だったりいろいろです。  
yuzu_ilo.pyが本体です。

# 主な機能
- dice
  - ダイスコードを入れるとさいころを振ってくれます。
- dice_2
  - 上の機能に加えてseed値を設定できるようになっています。
  - seed値はdiceとdice_2で別で管理されています。
- efia
  - unixtimeをefia数に変換できます。
  - unixtimeを省略したときは今日のefia数を確認できます。
  - int型で受け取りたいならefia_intが使えます。
- yuki_kekamu
  - int型のefia数をyuki暦での日付に変換できます。
  - efia数を省略したときは今日のyuki暦での日付を確認できます。
- prsk
  - プロセカのリザルトのPERFECT, GREAT, GOOD, BAD, MISSを順番にいれると、いろいろなものを確認できます。
    - PERFECTを100%、GREATを70%、GOODを50%としたときの達成率
    - ランクマッチでのスコア
    - ランクマッチでの理論値から何点減ったか
  - 最後に0が続くときは省略できます。
    - フルコンボならPERFECTとGREATだけで確認できます。
    - BADとMISSは足してから入れても計算に影響しません。
  - ノーツの種類を無視して計算しています。
- list_int_kebab
  - ハイフンで繋がれた数字をlist型に変換します。
  - prskと組み合わせると便利？
- str_pct
  - floot型の数字をいれると小数点第4位までのパーセント表記に変換します。
- pascal_sneke
  - Capitalized_Words_With_Underscores
- base_convert
  - str型の変換前の数字と変換後の底をいれると進数変換ができます。
  - 変換前と変換後の両方で2進数から36進数までを使えます。
    - 大文字と小文字は区別しません。
  - 変換前の数の桁区切りにアンダースコアが使えます。
  - 変換前の数が十進数ならそのまま変換できます。
  - 変換前の数が二進数、八進数、十六進数のどれかなら、プレフィックスの0b, 0o, 0xを使えます。
    - 0B, 0O, 0Xも使えます。
  - それ以外の場合は「(変換前の数の進法):(変換前の数)」のように入れます。
    - 変換前の数字に「12:987」のようにいれると十二進数の987と解釈されます。
    - 0b, 0o, 0xが接頭辞なのでそれに合わせました。

# バクっぽい仕様
- dice, dice_2
  - 一般的にダイスコードと認識されなさそうなものでもダイスコードとして認識します。
    - 20は1d20と解釈される。
    - 6+1は1d6+1と解釈される。
    - 2d+1は2d6+1と解釈される。

# 既知の問題 (修正予定のないもの、未検証のもの含む)
- float型でも「nanpa ala」と(たぶん)言われる。
- unixtimeをfloatからintに変換するときにint関数を使っているので、負の値だったときに(たぶん)1ずれる。
  - 現在のunixtimeが負の数のときの問題なので、自分で負の値をいれる分には問題なく動くはずです。
  - 1970年より前にタイムスリップしない限り大丈夫だと思います。
- 99行目から111行目
- efiaとyuki_kekamuの年がマイナスになるときはマイナスの記号にハイフンではなくチルダを使ったほうがいいかもしれない。
- pascal_snekeが元々大文字だけの単語を最初の文字以外を小文字に変換する。
  - capwordsの仕様が原因
- base_convertが2:12345のような矛盾したものを検知できない。
  - 検知したところで結局ValueErrorにするのでわざわざ検知する理由がない。
